# application-developers
This was a suggested CloudFormation template to create an IAM Group for application developers with a sensible set of AWS managed policies attached, generated by a query to ChatGPT.
* "a conservative, practical starter set that gives developers broad service access (but not ability to manage IAM users/groups), plus read-only IAM access so they can view identity configuration."

Default Policies included with this:
* AmazonS3FullAccess
* AmazonRDSFullAccess
* CloudWatchFullAccess
* IAMReadOnlyAccess

Built-in AWS policies that one might add for a more powerful set:
* AmazonDynamoDBFullAccess
* AmazonEC2FullAccess
* AWSLambda_FullAccess

## Preparatory Steps
* Remove any of the Inline Policies and Customer Managed policies created in the *policies-exercise* before deploying this template.
* IAM User _gjsWebsiteAdmin_ and IAM Group _aws-cli-capabilities_ should exist from previous exercises.
* Create a Customer Managed policy named _starter-policy_, using the content of _necessary_policies.json_ file.
* Attach the policy _starter-policy_ to the group _aws-cli-capabilities_.
    * Running _testscript-necessary-policies.sh_ will test that your policies are installed and working.

## Create the Stack 'dev-group-stack' and Group 'DevApplicationsGroup'
Use AWS Console or AWS CLI to create a CloudFormation stack called _dev-group-stack_ using the _template.yml_ file in this folder.

If you wish to do it with AWS CLI, use the command:

```bash
aws cloudformation create-stack --template-body file://template.yml --stack-name dev-group-stack --capabilities CAPABILITY_NAMED_IAM
```
> Note: When creating with CLI, the command comes back immediately, but the stack creation continues in the background.  See the **Troubleshooting** for how you can watch its progres.

## Troubleshooting
If stack creation fails you can get the failure reasons in two ways:
1. In AWS Console, go to CloudFormation, select the _dev-group-stack_ stack and go to the _Events_ tab.
2. In AWS CLI, run the command:
```bash
aws cloudformation describe-stack-events --stack-name dev-group-stack --query "StackEvents[?ResourceStatus=='CREATE_FAILED' || ResourceStatus=='UPDATE_FAILED']"
```
## Proof of Success
1. Detach the Managed Policy _starter-policies_ from the group _aws-cli-capabilities_ (because we want to prove that our new _dev-group-stack_ is the one providing access, not the temporary _starter-policies_).
2. Go to IAM -> Policies and confirm that the new Managed Policy _dev-group-stack_ exists.
3. Go to IAM -> Groups and confirm that the new Group _DevApplicationsGroup_ exists.
2. Remove user _gjsWebsiteAdmin_ from _aws-cli-capabilities_
2. Add user _gjsWebsiteAdmin_ to group _DevApplicationsGroup_
4. Run the script _testscript-necessary-files.sh_ to check for success.




TODO: Discover if my application-developers stack creates "all the permissions I need" for AWS app development, by: (1) Create my application-developers template; (2) delete the policy created by my-default-policy; (3) Run the application-developers template to create again a new group with a new name; if this succeeds, all is well
